import{c as k,m as F,u as U,a as _,n as C,o as I,r as i,j as e,L as p,p as P,b as D,_ as L}from"./index-BZ0hST_k.js";import{U as T}from"./user-check-BHj-mZXU.js";import{C as q}from"./check-Uol-saN6.js";import{U as z}from"./user-plus-D_28Q8fX.js";/**
 * @license lucide-react v0.459.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=k("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),M=()=>e.jsxs("div",{className:"flex flex-col items-center gap-4 pt-28 max-w-sm mx-auto animate-pulse",children:[e.jsx("div",{className:"avatar",children:e.jsx("div",{className:"w-32 h-32 rounded-full bg-base-300"})}),e.jsx("div",{className:"w-40 h-8 bg-base-300 rounded-lg"}),e.jsx("div",{className:"w-24 h-6 bg-base-300 rounded-lg"}),e.jsx("div",{className:"w-full h-16 bg-base-300 rounded-lg"}),e.jsxs("div",{className:"flex items-center gap-4 w-full",children:[e.jsx("div",{className:"w-1/2 h-12 bg-base-300 rounded-lg"}),e.jsx("div",{className:"w-1/2 h-12 bg-base-300 rounded-lg"})]})]}),X=()=>{const{username:l}=F(),{authUser:a}=U(),n=_(),{getFriendshipStatus:h,sendRequest:g,acceptRequest:j,rejectRequest:m,unfriend:N}=C(),{setSelectedUser:w}=I(),[s,E]=i.useState(null),[S,x]=i.useState(!0),[o,r]=i.useState(!1);i.useEffect(()=>{if(l.toLowerCase()===(a==null?void 0:a.username.toLowerCase())){n("/profile");return}(async()=>{var b,f;x(!0);try{const c=await D.get(`/users/profile/${l}`);E(c.data)}catch(c){console.error("Failed to fetch user profile:",c),L.error(((f=(b=c.response)==null?void 0:b.data)==null?void 0:f.error)||"User not found"),n("/")}finally{x(!1)}})()},[l,a,n]);const v=async()=>{if(s){r(!0);try{switch(t){case"NOT_FRIENDS":await g(s._id);break;case"REQUEST_SENT":await m(s._id);break;case"REQUEST_RECEIVED":await j(s._id);break;case"FRIENDS":await N(s._id);break;default:break}}catch(u){console.error("Friend action failed:",u)}finally{r(!1)}}},R=()=>{t==="FRIENDS"&&s&&(w(s),n("/"))};if(S)return e.jsx(M,{});if(!s)return null;const t=h(s._id),y=t!=="FRIENDS",d=(()=>{switch(t){case"NOT_FRIENDS":return{text:"Add Friend",icon:e.jsx(z,{size:18}),class:"btn-primary"};case"REQUEST_SENT":return{text:"Request Sent",icon:e.jsx(B,{size:18}),class:"btn-outline"};case"REQUEST_RECEIVED":return{text:"Accept Request",icon:e.jsx(q,{size:18}),class:"btn-success"};case"FRIENDS":return{text:"Friends",icon:e.jsx(T,{size:18}),class:"btn-secondary"};default:return{text:"Loading",icon:e.jsx(p,{size:18}),class:"btn-disabled"}}})();return e.jsx("div",{className:"min-h-screen bg-base-200",children:e.jsx("div",{className:"max-w-md mx-auto px-2 xs:px-3 sm:px-4 pt-14 xs:pt-16 sm:pt-18 md:pt-20 pb-16 xs:pb-18 sm:pb-20 md:pb-10",children:e.jsx("div",{className:"bg-base-100 rounded-lg sm:rounded-xl shadow-lg p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"avatar",children:e.jsx("div",{className:"w-28 h-28 sm:w-32 sm:h-32 rounded-full ring-4 ring-primary ring-offset-base-100 ring-offset-2",children:e.jsx("img",{src:s.profilePic||"/avatar.png",alt:`${s.nickname}'s profile`,className:"object-cover"})})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold",children:s.nickname}),e.jsxs("p",{className:"text-sm sm:text-base text-base-content/70",children:["@",s.username]})]}),s.bio&&e.jsx("p",{className:"text-center text-sm sm:text-base text-base-content/80 px-4",children:s.bio}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2 sm:gap-4 w-full pt-2 sm:pt-4",children:[e.jsxs("button",{className:`btn btn-sm sm:btn-md ${d.class} flex-1 w-full sm:w-auto`,onClick:v,disabled:o,children:[o?e.jsx(p,{className:"w-4 h-4 sm:w-5 sm:h-5 animate-spin"}):d.icon,e.jsx("span",{className:"text-sm sm:text-base",children:d.text})]}),e.jsxs("button",{className:"btn btn-sm sm:btn-md btn-ghost flex-1 w-full sm:w-auto",onClick:R,disabled:y,children:[e.jsx(P,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Message"})]})]}),t==="REQUEST_RECEIVED"&&e.jsx("button",{className:"btn btn-outline btn-error btn-xs sm:btn-sm w-full mt-2",onClick:async()=>{r(!0),await m(s._id),r(!1)},disabled:o,children:"Reject Request"})]})})})})};export{X as default};
